<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin - Edit Banner</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
    <link rel="stylesheet" href="../../assets/css/admin_style.css" />
    <style>
      @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .content-header, .banner-card { opacity: 0; }
      .fade-in { animation: fadeInUp 0.6s ease-out forwards; }
      .banner-preview {
        width: 100%;
        height: 180px; /* Tinggi tetap */
        object-fit: contain; /* Memastikan gambar terlihat sepenuhnya */
        border: 1px solid #ddd;
        border-radius: 8px;
        background-color: #f8f8f8;
      }
    </style>
  </head>
  <body>
    <div class="admin-wrapper">
      <div id="sidebar-container"></div>
      <div id="overlay"></div>
      <div class="main-content">
        <header class="content-header">
          <div>
            <h2>Edit Banner Promosi</h2>
            <p>Perbarui detail dan gambar untuk banner ini.</p>
          </div>
          <div class="d-flex align-items-center">
            <a href="settings.html#tampilan-tab" class="btn btn-outline-danger me-2">
              <i class="fas fa-arrow-left me-2"></i>Kembali ke Pengaturan
            </a>
          </div>
        </header>

        <div class="banner-edit-container">
          <div class="card banner-card">
            <form onsubmit="return false;">
              <div class="card-header">
                <h5 class="card-title-custom mb-0">Detail Banner</h5>
              </div>
              <div class="card-body">
                <div class="mb-4 text-center">
                  <label class="form-label d-block">Preview Banner</label>
                  <img src="https://palominobag.com/cdn/shop/products/VC100K_800x.jpg?v=1647922663" alt="Banner Preview" id="bannerPreview" class="banner-preview mb-3"/>
                  <input type="file" id="bannerUpload" class="d-none" accept="image/*"/>
                  <button type="button" class="btn btn-sm btn-light" onclick="document.getElementById('bannerUpload').click();">
                    <i class="fas fa-camera me-1"></i> Ganti Gambar Banner
                  </button>
                </div>

                <div class="mb-3">
                  <label for="bannerTitle" class="form-label">Judul Banner</label>
                  <input type="text" class="form-control" id="bannerTitle" value="Promo Awal Bulan - Diskon 15%"/>
                </div>
                <div class="mb-3">
                  <label for="bannerLink" class="form-label">Tautan (URL)</label>
                  <input type="url" class="form-control" id="bannerLink" value="https://smartfarm.com/promo-awal-bulan"/>
                  <div class="form-text">Pengguna akan diarahkan ke tautan ini saat mengklik banner.</div>
                </div>
                <div class="mb-4">
                  <label for="bannerDescription" class="form-label">Deskripsi Singkat (Opsional)</label>
                  <textarea class="form-control" id="bannerDescription" rows="3">Dapatkan diskon 15% untuk semua produk pilihan khusus di awal bulan ini. Jangan lewatkan!</textarea>
                </div>
                <div class="mb-3">
                  <label for="startDate" class="form-label">Tanggal Mulai</label>
                  <input type="date" class="form-control" id="startDate" value="2024-03-01"/>
                </div>
                <div class="mb-4">
                  <label for="endDate" class="form-label">Tanggal Berakhir</label>
                  <input type="date" class="form-control" id="endDate" value="2024-03-31"/>
                </div>
                <div class="form-check form-switch mb-3">
                  <input class="form-check-input" type="checkbox" role="switch" id="bannerActive" checked/>
                  <label class="form-check-label" for="bannerActive">Aktifkan Banner</label>
                </div>
              </div>
              <div class="card-footer text-end">
                <button type="button" class="btn btn-primary-custom" id="save-banner-btn">Simpan Perubahan</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/admin_script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Animasi fade-in
        const header = document.querySelector('.content-header');
        const card = document.querySelector('.banner-card');
        if (header) header.classList.add('fade-in');
        if (card) { setTimeout(() => { card.classList.add('fade-in'); }, 150); }

        // Preview gambar banner
        const bannerUpload = document.getElementById('bannerUpload');
        const bannerPreview = document.getElementById('bannerPreview');
        if (bannerUpload && bannerPreview) {
            bannerUpload.addEventListener('change', function(event) {
                if (event.target.files && event.target.files[0]) {
                    const reader = new FileReader();
                    reader.onload = (e) => { bannerPreview.src = e.target.result; };
                    reader.readAsDataURL(event.target.files[0]);
                }
            });
        }

        // SweetAlert untuk tombol simpan
        const saveBannerBtn = document.getElementById('save-banner-btn');
        if (saveBannerBtn) {
          saveBannerBtn.addEventListener('click', function(event) {
            event.preventDefault();
            Swal.fire({
              title: 'Tersimpan!',
              text: 'Perubahan banner telah berhasil disimpan.',
              icon: 'success',
              timer: 2000,
              showConfirmButton: false,
              toast: true,
              position: 'top-end'
            }).then(() => {
              // Opsional: Redirect kembali ke halaman pengaturan setelah simpan
              // window.location.href = 'settings.html';
            });
          });
        }
      });
    </script>
  </body>
</html>