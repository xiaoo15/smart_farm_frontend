<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pusat Bantuan - SmartFarm</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/css/public_style.css" />
    <style>
      /* CSS Tambahan Khusus Halaman Bantuan */
      :root {
        --primary-darkest: #051f20;
        --primary-dark: #163832;
        --primary: #235347;
        --primary-medium: #8eb69b;
        --primary-light: #daf1de;
        --light-bg: #f9fafb;
        --dark-text: #051f20;
        --light-text: #8eb69b;
        --white: #ffffff;
        --border-color: #e5e7eb;
        --border-radius: 12px;
        --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        --font-family: "Plus Jakarta Sans", sans-serif;
      }

      .help-header {
        background-color: var(--primary-light);
        padding: 4rem 1rem;
      }
      .help-header .display-5 {
        color: var(--primary-darkest);
      }
      .help-category-card {
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius);
        transition: all 0.3s ease;
      }
      .help-category-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--box-shadow);
        border-color: var(--primary);
      }
      .help-category-card i {
        font-size: 2.5rem;
        color: var(--primary);
      }
      .accordion-button:not(.collapsed) {
        background-color: var(--primary-light);
        color: var(--primary-darkest);
        font-weight: 600;
      }
      .cta-section {
        background-color: var(--primary);
        border-radius: var(--border-radius);
      }

      /* === [INI DIA PERBAIKANNYA] === */
      .section-title {
        font-weight: 700;
        position: relative;
        padding-bottom: 15px; /* Memberi ruang untuk garis bawah */
      }

      .section-title::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%); /* Trik biar garisnya pas di tengah */
        width: 60px;
        height: 4px;
        background-color: var(--primary);
        border-radius: 2px;
      }
      /* === SELESAI === */


      .btn-smartfarm-primary {
        background-color: var(--primary);
        color: white;
        border: none;
      }
      .btn-smartfarm-primary:hover {
        background-color: var(--primary-darkest);
        color: white;
      }
      .search-highlight {
        background-color: yellow;
        font-weight: bold;
      }
      .no-results {
        text-align: center;
        padding: 2rem;
        color: #6c757d;
      }
      .accordion-collapse {
        transition: all 0.3s ease;
      }

      @media (max-width: 768px) {
        .help-header {
          padding: 2rem 1rem;
        }
        .help-header .display-5 {
          font-size: 1.75rem;
        }
        .help-category-card i {
          font-size: 2rem;
        }
      }
    </style>
  </head>
  <body>
    <div id="preloader"><div class="spinner"></div></div>

    <div id="header-placeholder"></div>
    <main>
      <section class="help-header">
        <div class="container text-center">
          <h1 class="display-5 fw-bold">Bagaimana Kami Bisa Membantu?</h1>
          <p class="lead text-muted">
            Punya pertanyaan? Cari jawabanmu di sini.
          </p>
          <div class="mt-4 mx-auto" style="max-width: 600px">
            <form class="d-flex" role="search" id="searchForm">
              <div class="input-group">
                <input
                  type="search"
                  class="form-control form-control-lg"
                  placeholder="Cari berdasarkan kata kunci..."
                  id="searchInput"
                />
                <button class="btn btn-smartfarm-primary px-4" type="submit">
                  <i class="fas fa-search"></i>
                </button>
              </div>
            </form>
          </div>
        </div>
      </section>

      <section class="container py-5">
        <h2 class="section-title text-center mb-5">
          Kategori Bantuan
        </h2>
        <div class="row row-cols-1 row-cols-md-3 g-4">
          <div class="col">
            <div class="card h-100 help-category-card border-0 shadow-sm">
              <div class="card-body text-center p-4">
                <i class="fas fa-shipping-fast mb-3"></i>
                <h5 class="card-title fw-bold">Pengiriman & Pengembalian</h5>
                <p class="card-text text-muted small">
                  Informasi tentang status pesanan, pengiriman, dan cara
                  mengembalikan barang.
                </p>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card h-100 help-category-card border-0 shadow-sm">
              <div class="card-body text-center p-4">
                <i class="fas fa-credit-card mb-3"></i>
                <h5 class="card-title fw-bold">Pembayaran</h5>
                <p class="card-text text-muted small">
                  Panduan metode pembayaran, masalah transaksi, dan pengembalian
                  dana.
                </p>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card h-100 help-category-card border-0 shadow-sm">
              <div class="card-body text-center p-4">
                <i class="fas fa-user-circle mb-3"></i>
                <h5 class="card-title fw-bold">Akun Saya</h5>
                <p class="card-text text-muted small">
                  Cara mengelola akun, mengubah kata sandi, dan masalah login.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="container py-5">
        <h2 class="section-title text-center mb-5">
          Pertanyaan Populer
        </h2>
        <div class="accordion" id="accordionFAQ">
          <div class="accordion-item shadow-sm mb-3">
            <h2 class="accordion-header">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseOne"
              >
                Bagaimana cara melacak pesanan saya?
              </button>
            </h2>
            <div
              id="collapseOne"
              class="accordion-collapse collapse"
              data-bs-parent="#accordionFAQ"
            >
              <div class="accordion-body text-muted">
                Anda dapat melacak pesanan dengan masuk ke halaman 'Akun Saya',
                lalu pilih menu 'Pesanan'. Di sana Anda akan menemukan status
                pengiriman beserta nomor resi jika sudah tersedia.
              </div>
            </div>
          </div>
          <div class="accordion-item shadow-sm mb-3">
            <h2 class="accordion-header">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseTwo"
              >
                Apa yang harus saya lakukan jika pembayaran gagal?
              </button>
            </h2>
            <div
              id="collapseTwo"
              class="accordion-collapse collapse"
              data-bs-parent="#accordionFAQ"
            >
              <div class="accordion-body text-muted">
                Jika pembayaran Anda gagal, coba periksa kembali detail kartu
                atau metode pembayaran Anda. Pastikan saldo mencukupi. Jika
                masih gagal, coba gunakan metode pembayaran lain atau hubungi
                pihak bank Anda.
              </div>
            </div>
          </div>
          <div class="accordion-item shadow-sm mb-3">
            <h2 class="accordion-header">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseThree"
              >
                Apakah produk tanaman aman saat dikirim?
              </button>
            </h2>
            <div
              id="collapseThree"
              class="accordion-collapse collapse"
              data-bs-parent="#accordionFAQ"
            >
              <div class="accordion-body text-muted">
                Tentu saja! Kami menggunakan kemasan khusus yang dirancang untuk
                menjaga setiap tanaman tetap segar dan aman selama perjalanan.
                Kami memberikan garansi tanaman sampai dalam kondisi baik.
              </div>
            </div>
          </div>
          <div class="accordion-item shadow-sm mb-3">
            <h2 class="accordion-header">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseFour"
              >
                Berapa lama waktu pengiriman?
              </button>
            </h2>
            <div
              id="collapseFour"
              class="accordion-collapse collapse"
              data-bs-parent="#accordionFAQ"
            >
              <div class="accordion-body text-muted">
                Waktu pengiriman bervariasi tergantung lokasi Anda. Untuk area
                Jabodetabek, pengiriman biasanya memakan waktu 1-2 hari kerja.
                Untuk luar Jabodetabek, estimasi 3-7 hari kerja. Anda akan
                menerima notifikasi ketika pesanan dikirim.
              </div>
            </div>
          </div>
          <div class="accordion-item shadow-sm mb-3">
            <h2 class="accordion-header">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseFive"
              >
                Bagaimana cara mengembalikan produk?
              </button>
            </h2>
            <div
              id="collapseFive"
              class="accordion-collapse collapse"
              data-bs-parent="#accordionFAQ"
            >
              <div class="accordion-body text-muted">
                Untuk mengembalikan produk, silakan hubungi layanan pelanggan
                kami dalam waktu 7 hari setelah penerimaan produk. Pastikan
                produk masih dalam kondisi baik dan kemasan asli. Kami akan
                memberikan panduan lengkap tentang proses pengembalian.
              </div>
            </div>
          </div>
          <div class="accordion-item shadow-sm mb-3">
            <h2 class="accordion-header">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseSix"
              >
                Apakah ada garansi untuk tanaman yang mati?
              </button>
            </h2>
            <div
              id="collapseSix"
              class="accordion-collapse collapse"
              data-bs-parent="#accordionFAQ"
            >
              <div class="accordion-body text-muted">
                Ya, kami memberikan garansi 30 hari untuk tanaman yang mati
                setelah diterima. Silakan kirim foto tanaman kepada kami melalui
                email atau WhatsApp, dan kami akan menggantinya atau
                mengembalikan dana Anda.
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="container my-5">
        <div class="cta-section text-white py-5 px-4 text-center">
          <h2 class="fw-bold">Masih Butuh Bantuan?</h2>
          <p class="lead">
            Tim ahli dan asisten AI kami siap membantu Anda kapan saja.
          </p>
          <a href="contact.html" class="btn btn-light btn-lg mt-3 fw-bold"
            >Hubungi Kami</a
          >
        </div>
      </section>
    </main>

    <div id="footer-placeholder"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/public_script.js"></script>
    <script>
        // Fungsi untuk menyembunyikan preloader
        window.addEventListener('load', function() {
            const preloader = document.getElementById('preloader');
            setTimeout(function() {
                preloader.style.display = 'none';
            }, 500);
        });
        
        // Fungsi pencarian FAQ
        document.getElementById('searchForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            
            if (searchTerm === '') {
                // Reset semua FAQ jika pencarian kosong
                resetFAQ();
                return;
            }
            
            searchFAQ(searchTerm);
        });
        
        function searchFAQ(term) {
            const accordionItems = document.querySelectorAll('.accordion-item');
            let foundResults = false;
            
            accordionItems.forEach(item => {
                const question = item.querySelector('.accordion-button').textContent.toLowerCase();
                const answer = item.querySelector('.accordion-body').textContent.toLowerCase();
                
                if (question.includes(term) || answer.includes(term)) {
                    item.style.display = 'block';
                    foundResults = true;
                    
                    // Highlight teks yang cocok
                    highlightText(item, term);
                    
                    // Buka accordion untuk hasil pencarian
                    const collapseId = item.querySelector('.accordion-collapse').id;
                    const button = item.querySelector('.accordion-button');
                    if (button.classList.contains('collapsed')) {
                        button.click();
                    }
                } else {
                    item.style.display = 'none';
                }
            });
            
            // Tampilkan pesan jika tidak ada hasil
            const accordion = document.getElementById('accordionFAQ');
            let noResults = document.getElementById('noResultsMessage');
            
            if (!foundResults) {
                if (!noResults) {
                    noResults = document.createElement('div');
                    noResults.id = 'noResultsMessage';
                    noResults.className = 'no-results';
                    noResults.innerHTML = '<p><i class="fas fa-search fa-3x mb-3"></i></p><h4>Tidak ditemukan hasil untuk "' + term + '"</h4><p>Coba gunakan kata kunci yang berbeda atau hubungi tim dukungan kami.</p>';
                    accordion.appendChild(noResults);
                }
            } else {
                if (noResults) {
                    noResults.remove();
                }
            }
        }
        
        function resetFAQ() {
            const accordionItems = document.querySelectorAll('.accordion-item');
            accordionItems.forEach(item => {
                item.style.display = 'block';
                removeHighlights(item);
                
                // Tutup semua accordion
                const button = item.querySelector('.accordion-button');
                if (!button.classList.contains('collapsed')) {
                    button.click();
                }
            });
            
            const noResults = document.getElementById('noResultsMessage');
            if (noResults) {
                noResults.remove();
            }
        }
        
        function highlightText(element, term) {
            const textNodes = getTextNodes(element);
            
            textNodes.forEach(node => {
                const parent = node.parentNode;
                const text = node.textContent;
                const regex = new RegExp(term, 'gi');
                const newText = text.replace(regex, match => `<span class="search-highlight">${match}</span>`);
                
                if (newText !== text) {
                    const newSpan = document.createElement('span');
                    newSpan.innerHTML = newText;
                    parent.replaceChild(newSpan, node);
                }
            });
        }
        
        function removeHighlights(element) {
            const highlights = element.querySelectorAll('.search-highlight');
            highlights.forEach(highlight => {
                const parent = highlight.parentNode;
                while (highlight.firstChild) {
                    parent.insertBefore(highlight.firstChild, highlight);
                }
                parent.removeChild(highlight);
            });
        }
        
        function getTextNodes(element) {
            const textNodes = [];
            const walker = document.createTreeWalker(
                element,
                NodeFilter.SHOW_TEXT,
                null,
                false
            );
            
            let node;
            while (node = walker.nextNode()) {
                textNodes.push(node);
            }
            
            return textNodes;
        }
    </script>
  </body>
</html>