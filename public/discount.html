<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Diskon</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../../assets/css/nav_public.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
    <style>
      .cart-badge {
        font-size: 0.7rem;
        padding: 0.3em 0.5em;
      }
      @media (max-width: 991.98px) {
        .navbar .form-control {
          width: 100%;
          margin-bottom: 0.5rem;
        }
        .navbar .btn {
          width: 100%;
        }
        .navbar .navbar-nav {
          flex-direction: row;
          justify-content: flex-end;
          gap: 0.5rem;
        }
      }
      @media (max-width: 575.98px) {
        .navbar-brand {
          font-size: 1.1rem;
        }
        .navbar .form-control {
          font-size: 0.9rem;
        }
        .navbar .btn {
          font-size: 0.9rem;
        }
        .cart-badge {
          font-size: 0.6rem;
        }
      }
      .discount-label {
        display: inline-block;
        background-color: #f8d7da; /* Warna merah muda */
        color: #721c24; /* Warna teks merah gelap */
        padding: 2px 6px;
        font-size: 0.7em;
        font-weight: bold;
        border-radius: 4px;
        margin-left: 8px; /* Memberi jarak dari harga asli */
      }
    </style>
</head>
<body>
<div id="header-placeholder"></div>
    <div class="main-container">
        <h1 class="mb-4 fw-bold">PROMO DISKON</h1>
        
       <div class="product-section bg-white rounded-3 p-3">
    <div class="section-header">
        <h4 class="section-title">PRODUK DISKON HARI INI</h4>
        <a href="#" class="section-see-all">Lihat Semua <i class="fas fa-chevron-right"></i></a>
    </div>
    <div class="row g-3">
        <script>
            const produkDiskon = [
                "Benih Selada Diskon", "Pupuk Kompos", "Sekop Taman", 
                "Keranjang Panen", "Penyemprot Tanaman", "Buku Bertani",
                "Benih Tomat Cherry", "Obat Hama Organik", "Polybag", 
                "Benih Kangkung", "Sarung Tangan Kulit", "Benih Bayam",
                "Benih Jagung Manis", "Bibit Mangga", "Beras Merah",
                "Madu Hutan", "Telur Omega 3", "Benih Anggur", 
                "Alat Ukur pH Tanah", "Jaring Pelindung Tanaman", "Benih Terong Ungu",
                "Bibit Stroberi Import", "Cangkul Mini", "Pupuk NPK",
                "Pot Gantung Keramik", "Benih Kacang Panjang", "Benih Bawang Putih",
                "Benih Timun", "Benih Sawi", "Bibit Jambu Air", 
                "Benih Bunga Matahari", "Benih Ubi Jalar", "Benih Jahe Merah",
                "Beras Pandan Wangi", "Gula Aren Cair", "Benih Buah Naga",
                "Benih Kacang Hijau", "Benih Semangka", "Benih Melon", 
                "Bibit Pohon Rambutan", "Benih Labu Siam", "Benih Kacang Tanah",
                "Benih Buncis", "Benih Cabai Rawit", "Benih Kemangi",
                "Benih Sereh", "Benih Kunyit", "Benih Lengkuas",
                "Benih Pala", "Benih Vanili"
            ];
            for (let i = 0; i < 50; i++) {
                const namaProduk = produkDiskon[i % produkDiskon.length];
                const diskon = Math.floor(Math.random() * 40) + 10; // Diskon 10-50%
                const hargaAsli = (Math.random() * 50000 + 15000).toFixed(0);
                const hargaDiskon = (hargaAsli * (1 - diskon / 100)).toFixed(0);
                const terjual = Math.floor(Math.random() * 1000);

                document.write(`
                    <div class="col-6 col-md-4 col-lg-2">
                        <a href="#" class="product-card-link">
                            <div class="card h-100 product-card">
                                <div class="img-container">
                                    <img src="https://source.unsplash.com/random/300x200/?sale,discount,farm,${i}" class="card-img-top" alt="${namaProduk}">
                                </div>
                                <div class="card-body">
                                    <p class="product-title">${namaProduk}</p>
                                    <div class="d-flex align-items-baseline">
                                        <p class="text-decoration-line-through text-secondary mb-0 me-2">Rp${hargaAsli.replace(/\B(?=(\d{3})+(?!\d))/g, ".")}</p>
                                        <p class="product-price mb-0">Rp${hargaDiskon.replace(/\B(?=(\d{3})+(?!\d))/g, ".")}</p>
                                    </div>
                                    <span class="discount-label">Diskon ${diskon}%</span>
                                    <div class="d-flex justify-content-between align-items-center mt-2">
                                        <p class="product-sold mb-0">${terjual}+ terjual</p>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                `);
            }
        </script>
    </div>
</div>
    </div>
    <div id="chat-placeholder"></div>
  <script src="../../assets/js/public_app.js"></script>
    <script>
      async function loadHeader() {
    try {
      const response = await fetch("../../components/_navbar_public.html");
      if (response.ok) {
        const headerContent = await response.text();
        document.getElementById("header-placeholder").innerHTML = headerContent;
      } else {
        console.error(
          "Gagal memuat _navbar_public.html:",
          response.statusText
        );
      }
    } catch (error) {
      console.error("Error saat memuat file:", error);
    }
  }

  async function loadChatDropdown() {
    try {
      const response = await fetch("./chat.html");
      if (response.ok) {
        const chatContent = await response.text();
        document.getElementById("chat-placeholder").innerHTML = chatContent;

        // PANGGIL SKRIP CHAT DI SINI!
        const chatScript = document.createElement("script");
        chatScript.src = "../../assets/js/chat.js";
        document.body.appendChild(chatScript);

      } else {
        console.error("Gagal memuat chat.html:", response.statusText);
      }
    } catch (error) {
      console.error("Error saat memuat file:", error);
    }
  }
  document.addEventListener("DOMContentLoaded", function () {
    loadHeader();
    loadChatDropdown();
  });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/chat.js"></script>
    <script src="../../assets/js/public_app.js"></script>
  </body>
</html>