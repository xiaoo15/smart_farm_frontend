<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Detail Produk - SmartFarm</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/css/public_style.css" />
  </head>
  <body>
    <div id="preloader"><div class="spinner"></div></div>
    <div id="header-placeholder"></div>

    <main class="container my-5" id="product-detail-container">
      <p class="text-center">Memuat detail produk...</p>
    </main>

    <section class="container my-5 recommendation-section">
      <h2 class="section-title mb-4">Produk Lain yang Mungkin Kamu Suka</h2>
      <div class="row g-4" id="recommendation-list"></div>
    </section>

    <div id="footer-placeholder"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/public_script.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Salin (copy) array 'allProducts' yang sudah di-update dari file products.html ke sini.
        const allProducts = [
          // --- KATEGORI: HIDROPONIK KIT ---
          {
            id: 1,
            name: "HydroKit Mini Starter",
            category: "kit",
            price: 185000,
            originalPrice: 225000,
            image:
              "https://i.pinimg.com/736x/3f/bd/42/3fbd42c0b1283820276dbf7661e32ee1.jpg",
            rating: 4.8,
            sold: "3.2k",
            date: "2024-08-10",
            badge: { text: "DISKON", class: "badge-sale" },
            description:
              "Paket lengkap untuk pemula yang ingin mencoba hidroponik. Mudah dirakit dan tidak memakan tempat, cocok untuk menanam sayuran daun di balkon atau halaman rumah. Semua yang Anda butuhkan untuk memulai panen pertama Anda ada di sini.",
            specs: {
              "Jumlah Lubang": "8",
              "Ukuran Pipa": "2.5 inch",
              "Kapasitas Air": "15 Liter",
              "Isi Paket":
                "Pipa, Pompa, Netpot, Rockwool, 2 Jenis Benih, Nutrisi AB Mix 250ml",
            },
          },
          {
            id: 7,
            name: "HydroTower Vertical Garden",
            category: "kit",
            price: 750000,
            originalPrice: null,
            image:
              "https://i.pinimg.com/564x/a2/28/76/a22876b6c59218275550a2f45130e8c8.jpg",
            rating: 5,
            sold: "890",
            date: "2024-07-22",
            badge: { text: "PRODUK BARU", class: "badge-new" },
            description:
              "Solusi berkebun di lahan terbatas. Sistem hidroponik vertikal yang efisien dan modern, mampu menampung hingga 20 tanaman. Desain elegan yang juga berfungsi sebagai dekorasi.",
            specs: {
              "Jumlah Lubang": "20",
              Sistem: "NFT (Nutrient Film Technique)",
              Tinggi: "1.5 Meter",
              "Isi Paket":
                "Tower, Pompa, Netpot, Rockwool, Nutrisi AB Mix 500ml, Timer",
            },
          },
          {
            id: 8,
            name: "Dutch Bucket System (5 Pot)",
            category: "kit",
            price: 450000,
            originalPrice: null,
            image:
              "https://i.pinimg.com/564x/f7/a8/38/f7a8385a4982635334c26a0b9a68c34c.jpg",
            rating: 4.5,
            sold: "1.1k",
            date: "2024-06-15",
            badge: { text: "BEST SELLER", class: "badge-bestseller" },
            description:
              "Sistem hidroponik yang ideal untuk tanaman buah seperti tomat, paprika, dan mentimun. Setiap pot memiliki sistem irigasi tetes individu untuk nutrisi yang optimal.",
            specs: {
              "Jumlah Pot": "5",
              "Kapasitas Pot": "10 Liter",
              "Media Tanam": "Perlite & Vermiculite (termasuk)",
              "Isi Paket":
                "5 Bucket, Pipa Sirkulasi, Pompa, Selang, Nutrisi Buah 500ml",
            },
          },
          {
            id: 15,
            name: "Window Farm Kit",
            category: "kit",
            price: 250000,
            originalPrice: null,
            image:
              "https://i.pinimg.com/564x/b8/96/a8/b896a8a4f4e7102e1c942aba743b8118.jpg",
            rating: 4.2,
            sold: "450",
            date: "2024-05-01",
            badge: null,
            description:
              "Manfaatkan jendela rumahmu untuk menanam sayuran segar atau herbal dengan kit hidroponik gantung yang praktis ini. Menggunakan botol daur ulang sebagai wadah tanam.",
            specs: {
              "Jumlah Lubang": "4",
              Sistem: "Wick System (Sumbu)",
              "Cocok Untuk": "Herbal (Basil, Mint), Selada",
              "Isi Paket":
                "Rangka Gantung, Pompa Mini, Sumbu, Netpot, Rockwool, Benih Herbal",
            },
          },
          // --- KATEGORI: TANAMAN HIAS ---
          {
            id: 2,
            name: "Caladium Red Star",
            category: "hias",
            price: 75000,
            originalPrice: null,
            image:
              "https://i.pinimg.com/736x/21/e7/ed/21e7edbf1feac9ae291fdf783f383c5a.jpg",
            rating: 4.5,
            sold: "230",
            date: "2024-08-01",
            badge: { text: "PRODUK BARU", class: "badge-new" },
            description:
              "Tanaman hias dengan warna merah menyala yang eksotis. Daunnya yang berbentuk hati memberikan sentuhan tropis yang mewah di sudut ruangan Anda. Perawatan mudah dan tidak memerlukan banyak sinar matahari langsung.",
            specs: {
              "Tinggi Tanaman": "20-30 cm",
              "Ukuran Pot": "Diameter 15 cm",
              "Media Tanam": "Sekam Bakar, Cocopeat",
              "Kebutuhan Sinar": "Rendah - Sedang",
            },
          },
          {
            id: 6,
            name: "Monstera Deliciosa",
            category: "hias",
            price: 125000,
            originalPrice: null,
            image:
              "https://i.pinimg.com/1200x/38/cf/fa/38cffaaf2227820ea7d719381d85eaa7.jpg",
            rating: 5,
            sold: "185",
            date: "2024-08-05",
            badge: null,
            description:
              "Tanaman hias ikonik dengan daun terbelah yang unik. Memberikan kesan tropis dan modern pada interior. Semakin dewasa, belahan daunnya akan semakin banyak dan indah.",
            specs: {
              "Tinggi Tanaman": "30-40 cm",
              "Ukuran Pot": "Diameter 18 cm",
              "Media Tanam": "Tanah Subur, Humus",
              "Kebutuhan Sinar": "Sedang, tidak langsung",
            },
          },
          {
            id: 9,
            name: "Sansevieria Trifasciata",
            category: "hias",
            price: 60000,
            originalPrice: 80000,
            image:
              "https://i.pinimg.com/564x/a4/0f/73/a40f73843f55a1a1f061217594191a92.jpg",
            rating: 4.7,
            sold: "950",
            date: "2024-07-18",
            badge: { text: "DISKON", class: "badge-sale" },
            description:
              "Dikenal sebagai 'Lidah Mertua', tanaman ini sangat kuat dan mampu membersihkan udara dalam ruangan dari polutan. Sangat cocok untuk pemula karena perawatannya sangat minim.",
            specs: {
              "Tinggi Tanaman": "25-35 cm",
              "Ukuran Pot": "Diameter 15 cm",
              "Media Tanam": "Sekulen & Kaktus Mix",
              "Kebutuhan Sinar": "Sangat Toleran (Rendah - Terang)",
            },
          },
          {
            id: 10,
            name: "Alocasia Black Velvet",
            category: "hias",
            price: 150000,
            originalPrice: null,
            image:
              "https://i.pinimg.com/564x/5a/0f/58/5a0f5803886cd3a42c67677bc2e2a733.jpg",
            rating: 4.9,
            sold: "310",
            date: "2024-08-12",
            badge: { text: "STOK TERBATAS", class: "badge-limited" },
            description:
              "Tanaman premium dengan daun hitam beludru dan urat silver yang mewah. Menjadi pusat perhatian di koleksi tanaman hias Anda. Membutuhkan kelembapan yang cukup.",
            specs: {
              "Tinggi Tanaman": "15-25 cm",
              "Ukuran Pot": "Diameter 12 cm",
              "Media Tanam": "Aroid Mix (Cocochip, Perlite)",
              "Kebutuhan Sinar": "Terang, tidak langsung",
            },
          },
          // --- KATEGORI: BIBIT & BENIH ---
          {
            id: 3,
            name: "Bibit Selada Romaine (Hydro)",
            category: "bibit",
            price: 25000,
            originalPrice: null,
            image:
              "https://i.pinimg.com/1200x/74/e7/8c/74e78cb0708839f8dbfe4ceded346702.jpg",
            rating: 5,
            sold: "8k+",
            date: "2024-07-25",
            badge: { text: "PILIHAN", class: "badge-limited" },
            description:
              "Bibit selada romaine unggulan yang sudah diadaptasi khusus untuk sistem hidroponik. Memiliki tingkat germinasi tinggi, cepat tumbuh, dan tekstur daun yang renyah. Panen dalam 30-40 hari setelah semai.",
            specs: {
              "Isi per Paket": "Â± 200 biji",
              Germinasi: "85% - 95%",
              "Rekomendasi pH": "5.5 - 6.5",
              "Rekomendasi PPM": "560 - 840",
            },
          },
          {
            id: 11,
            name: "Benih Kangkung Bangkok",
            category: "bibit",
            price: 12000,
            originalPrice: null,
            image:
              "https://i.pinimg.com/564x/8e/31/35/8e31359c381c6674483e60181534346e.jpg",
            rating: 4.8,
            sold: "12k+",
            date: "2024-03-10",
            badge: { text: "BEST SELLER", class: "badge-bestseller" },
            description:
              "Benih kangkung varietas Bangkok, mudah tumbuh, dan bisa dipanen dalam waktu singkat (20-30 hari). Cocok untuk ditanam di sistem hidroponik maupun konvensional.",
            specs: {
              "Isi per Paket": "Â± 500 biji",
              Germinasi: "> 90%",
              "Rekomendasi pH": "5.5 - 7.0",
              "Rekomendasi PPM": "700 - 1400",
            },
          },
          {
            id: 12,
            name: "Benih Tomat Cherry Super",
            category: "bibit",
            price: 30000,
            originalPrice: null,
            image:
              "https://i.pinimg.com/564x/4b/c9/2e/4bc92e850b5711b7e435a297746419a4.jpg",
            rating: 4.6,
            sold: "2.5k",
            date: "2024-06-20",
            badge: null,
            description:
              "Hasilkan tomat cherry yang manis dan melimpah langsung dari kebun hidroponik Anda. Tahan terhadap penyakit dan cuaca panas.",
            specs: {
              "Isi per Paket": "Â± 30 biji",
              Germinasi: "80% - 90%",
              "Potensi Hasil": "3-5 kg per tanaman",
              "Masa Panen": "~90 hari setelah tanam",
            },
          },
          {
            id: 18,
            name: "Bibit Strawberry California",
            category: "bibit",
            price: 45000,
            originalPrice: null,
            image:
              "https://i.pinimg.com/564x/f1/40/f7/f140f7d549f7a7597148b51d8058b76c.jpg",
            rating: 4.9,
            sold: "5.2k",
            date: "2024-08-08",
            badge: { text: "PRODUK BARU", class: "badge-new" },
            description:
              "Bibit unggul strawberry California yang sudah beradaptasi untuk ditanam di iklim tropis. Menghasilkan buah yang besar dan manis. Dikirim dalam bentuk bibit hidup siap tanam.",
            specs: {
              Tipe: "Bibit hidup (runner)",
              Jumlah: "1 bibit",
              "Rekomendasi Sistem": "NFT, Rak Tetes",
              "Rekomendasi PPM": "840 - 1260",
            },
          },
          // --- KATEGORI: NUTRISI ---
          {
            id: 4,
            name: "Nutrisi AB Mix Premium",
            category: "nutrisi",
            price: 45000,
            originalPrice: 55000,
            image:
              "https://i.pinimg.com/736x/d5/0d/ad/d50dadbceb8948b3afcba70f927facdf.jpg",
            rating: 4.7,
            sold: "400+",
            date: "2024-06-15",
            badge: { text: "DISKON", class: "badge-sale" },
            description:
              "Nutrisi lengkap siap pakai untuk semua jenis tanaman hidroponik, mengandung unsur makro dan mikro esensial yang 100% larut dalam air. Cukup campurkan pekatan A dan B dengan air sesuai takaran.",
            specs: {
              Bentuk: "Pekatan Cair",
              Ukuran: "2 x 250ml",
              "Target PPM": "1000-1400 PPM",
              Kandungan: "Unsur Makro & Mikro Lengkap",
            },
          },
          {
            id: 13,
            name: "Pupuk Organik Cair (POC)",
            category: "nutrisi",
            price: 35000,
            originalPrice: null,
            image:
              "https://i.pinimg.com/564x/e7/a7/0a/e7a70a831e67d268a0a9557b646c1e33.jpg",
            rating: 4.5,
            sold: "1.8k",
            date: "2024-04-25",
            badge: null,
            description:
              "Pupuk organik cair yang kaya akan mikroorganisme baik untuk menyuburkan media tanam dan menyehatkan akar. Cocok untuk tanaman konvensional dan sebagai suplemen pada hidroponik.",
            specs: {
              Bentuk: "Cair",
              Ukuran: "500ml",
              Aplikasi: "Siram ke media tanam / Semprot ke daun",
              Frekuensi: "1-2 minggu sekali",
            },
          },
          {
            id: 14,
            name: "Root Booster Super",
            category: "nutrisi",
            price: 55000,
            originalPrice: null,
            image:
              "https://i.pinimg.com/564x/6c/67/03/6c670390a316fed930a4c95213b2e59e.jpg",
            rating: 4.9,
            sold: "2.2k",
            date: "2024-07-30",
            badge: { text: "BEST SELLER", class: "badge-bestseller" },
            description:
              "Formula khusus untuk merangsang pertumbuhan akar baru, membuat tanaman lebih kuat dan sehat. Sangat baik digunakan pada saat pindah tanam atau untuk perbanyakan stek.",
            specs: {
              Bentuk: "Cair",
              Ukuran: "100ml",
              "Kandungan Utama": "Hormon Auksin, Vitamin B1",
              Dosis: "2ml per liter air",
            },
          },
          {
            id: 20,
            name: "Kalsium Nitrat (KNO3)",
            category: "nutrisi",
            price: 28000,
            originalPrice: null,
            image:
              "https://i.pinimg.com/564x/0a/d6/3d/0ad63d3e6015d97f22d1487f941f649e.jpg",
            rating: 4.6,
            sold: "980",
            date: "2024-02-11",
            badge: null,
            description:
              "Pupuk makro sekunder yang penting untuk mencegah kerontokan bunga dan buah, serta memperkuat dinding sel tanaman. Wajib dimiliki untuk budidaya tanaman buah.",
            specs: {
              Bentuk: "Kristal",
              "Berat Bersih": "500 gram",
              Kelarutan: "100% larut air",
              Penggunaan: "Komponen tambahan nutrisi AB Mix",
            },
          },
          // --- KATEGORI: MEDIA TANAM ---
          {
            id: 5,
            name: "Rockwool Cultilene",
            category: "media",
            price: 15000,
            originalPrice: null,
            image:
              "https://i.pinimg.com/1200x/93/d1/64/93d164ef5fe8afb9c5ded04b26eafb57.jpg",
            rating: 4.9,
            sold: "312",
            date: "2024-05-20",
            badge: { text: "BEST SELLER", class: "badge-bestseller" },
            description:
              "Media tanam rockwool impor berkualitas tinggi, mampu menyerap air dengan baik dan steril. Sangat ideal untuk tahap persemaian benih hidroponik.",
            specs: {
              Ukuran: "1 slab (100cm x 15cm x 7.5cm)",
              Kepadatan: "45 kg/mÂ³",
              "Arah Serat": "Horizontal",
              Kelebihan: "Steril, retensi air tinggi",
            },
          },
          {
            id: 16,
            name: "Hydroton Jerman",
            category: "media",
            price: 35000,
            originalPrice: null,
            image:
              "https://i.pinimg.com/564x/e3/3a/0d/e33a0d33e9b1a5390623a1a1f1035ac8.jpg",
            rating: 4.8,
            sold: "1.5k",
            date: "2024-07-05",
            badge: null,
            description:
              "Media tanam hidroponik dari tanah liat yang dibakar, bisa dipakai berulang kali dan memiliki aerasi yang sangat baik untuk akar. Ukuran seragam dan tidak mudah hancur.",
            specs: {
              "Berat Bersih": "1 Liter",
              Ukuran: "8-16 mm",
              Bahan: "Tanah Liat Pilihan",
              Kelebihan: "Dapat digunakan kembali, pH netral",
            },
          },
          {
            id: 17,
            name: "Cocopeat Blok Premium",
            category: "media",
            price: 22000,
            originalPrice: 28000,
            image:
              "https://i.pinimg.com/564x/61/52/fa/6152fa2439c118a8022b79313271705e.jpg",
            rating: 4.7,
            sold: "3.5k",
            date: "2024-06-01",
            badge: { text: "DISKON", class: "badge-sale" },
            description:
              "Media tanam organik dari serabut kelapa yang sudah diproses dan dicuci, bebas dari zat tanin. Cukup direndam air, blok akan mengembang hingga 5-7 kali lipat.",
            specs: {
              "Berat Kering": "Â± 500 gram",
              "Volume Setelah Mengembang": "5-7 Liter",
              EC: "< 0.5 mS/cm",
              Kelebihan: "Daya simpan air tinggi",
            },
          },
          {
            id: 19,
            name: "Sekam Bakar Fermentasi",
            category: "media",
            price: 18000,
            originalPrice: null,
            image:
              "https://i.pinimg.com/564x/8d/e2/26/8de226211479d20c528f9d0c270d1cf5.jpg",
            rating: 4.6,
            sold: "2.8k",
            date: "2024-01-30",
            badge: null,
            description:
              "Media tanam porous yang sudah difermentasi, bagus untuk aerasi akar dan mencegah jamur. Sangat cocok sebagai campuran media tanam konvensional maupun untuk lapisan dasar pot hidroponik.",
            specs: {
              "Berat Bersih": "1 kg",
              "Kadar Air": "< 15%",
              pH: "Netral (6.5 - 7.0)",
              Bahan: "Sekam padi pilihan",
            },
          },
        ];

        const container = document.getElementById("product-detail-container");
        const recommendationContainer = document.getElementById(
          "recommendation-list"
        );
        const urlParams = new URLSearchParams(window.location.search);
        const productId = parseInt(urlParams.get("id"));
        const product = allProducts.find((p) => p.id === productId);

        if (product) {
          document.title = product.name + " - SmartFarm";

          // --- FUNGSI UNTUK MEMBUAT KONTEN TABS ---
          const createSpecsTable = (specs) => {
            let tableRows = "";
            for (const key in specs) {
              tableRows += `<tr><td>${key}</td><td>${specs[key]}</td></tr>`;
            }
            return `<table class="table spec-table"><tbody>${tableRows}</tbody></table>`;
          };

          const priceHTML = product.originalPrice
            ? `<span class="price-original fs-5">Rp ${product.originalPrice.toLocaleString(
                "id-ID"
              )}</span> Rp ${product.price.toLocaleString("id-ID")}`
            : `Rp ${product.price.toLocaleString("id-ID")}`;

          // --- TEMPLATE HTML BARU YANG LEBIH LENGKAP ---
          const productDetailHTML = `
                <div class="row">
                    <div class="col-lg-6">
                        <div class="image-gallery"><div class="main-image-wrapper"><img src="${
                          product.image
                        }" alt="${
            product.name
          }" class="img-fluid rounded"></div></div>
                    </div>
                    <div class="col-lg-6">
                        <div class="product-info-wrapper mt-4 mt-lg-0">
                            <p class="brand-name">${
                              product.category.charAt(0).toUpperCase() +
                              product.category.slice(1)
                            }</p>
                            <h1 class="product-title">${product.name}</h1>
                            <div class="d-flex align-items-center my-3">
                                <div class="stars product-rating">${"â".repeat(
                                  Math.floor(product.rating)
                                )}${"â".repeat(
            5 - Math.floor(product.rating)
          )}</div>
                                <span class="ms-2 text-muted">(${
                                  product.rating
                                } | ${product.sold} terjual)</span>
                            </div>
                            <h2 class="price my-4">${priceHTML}</h2>
                            <div class="product-actions-group">
                                <div class="quantity-selector"><button class="btn btn-light quantity-btn">-</button><input type="text" class="form-control text-center" value="1" readonly><button class="btn btn-light quantity-btn">+</button></div>
                                <button class="btn btn-add-to-cart flex-grow-1"><i class="fas fa-shopping-cart me-2"></i> Tambah Keranjang</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row mt-5">
                    <div class="col-12">
                        <div class="product-details-tabs">
                            <ul class="nav nav-tabs" id="myTab" role="tablist">
                                <li class="nav-item" role="presentation"><button class="nav-link active" id="description-tab" data-bs-toggle="tab" data-bs-target="#description" type="button">Deskripsi Lengkap</button></li>
                                <li class="nav-item" role="presentation"><button class="nav-link" id="specs-tab" data-bs-toggle="tab" data-bs-target="#specs" type="button">Spesifikasi</button></li>
                                <li class="nav-item" role="presentation"><button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button">Ulasan (3)</button></li>
                            </ul>
                            <div class="tab-content" id="myTabContent">
                                <div class="tab-pane fade show active" id="description" role="tabpanel">${
                                  product.description
                                }</div>
                                <div class="tab-pane fade" id="specs" role="tabpanel">${createSpecsTable(
                                  product.specs
                                )}</div>
                                <div class="tab-pane fade" id="reviews" role="tabpanel">
                                    <p>Konten ulasan akan ditambahkan di sini nanti.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
          container.innerHTML = productDetailHTML;

          // --- Logika untuk Rekomendasi Produk ---
          const recommendations = allProducts
            .filter(
              (p) => p.category === product.category && p.id !== product.id
            )
            .slice(0, 4);
          let recommendationHTML = "";
          recommendations.forEach((rec) => {
            recommendationHTML += `
                    <div class="col-lg-3 col-md-4 col-sm-6">
                        <div class="product-card-offer h-100">
                           <div class="product-image-wrapper">
                                <a href="product_detail.html?id=${
                                  rec.id
                                }"><img src="${rec.image}" alt="${
              rec.name
            }" loading="lazy"/></a>
                            </div>
                            <div class="product-info p-3">
                                <h3 class="product-title fs-6"><a href="product_detail.html?id=${
                                  rec.id
                                }">${rec.name}</a></h3>
                                <p class="product-price mt-auto mb-0">Rp ${rec.price.toLocaleString(
                                  "id-ID"
                                )}</p>
                            </div>
                        </div>
                    </div>
                `;
          });
          recommendationContainer.innerHTML =
            recommendationHTML ||
            '<p class="col-12">Tidak ada rekomendasi produk sejenis.</p>';
        } else {
          container.innerHTML =
            '<h3 class="text-center">Waduh, produk yang kamu cari tidak ditemukan!</h3>';
        }
      });
    </script>
  </body>
</html>
