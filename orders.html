<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin - Master Orders</title>
<link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="assets/css/admin_style.css" />
    <style>
        :root {
            /* PALET WARNA BARU */
            --primary: #235347; /* Hijau Tua untuk tombol, link aktif, dan highlight */
            --primary-light: rgba(142, 182, 155, 0.2); /* Versi terang dari card-bg untuk hover */
            --secondary: #0b2b26; /* Hijau Sangat Tua untuk sidebar/header */
            --success: #28a745; /* Tetap pakai hijau standar untuk notif sukses */
            --info: #17a2b8;
            --warning: #ffc107;
            --danger: #dc3545; /* Tetap pakai merah standar untuk notif error */
            --light: #f8f9fa;
            --dark: #051f20; /* Hijau Paling Gelap untuk Teks */
            --text-primary: #051f20; /* Teks utama jadi hijau paling gelap */
            --text-secondary: #163832; /* Teks sekunder/abu-abu jadi hijau lebih terang */
            --background: #ffffff; /* Latar Belakang Utama (Hijau Paling Terang) */
            --card-bg: #ffffff; /* Kartu kita buat putih bersih agar konten menonjol */
            --border-color: #8eb69b; /* Warna Border (Hijau Abu-abu) */

            /* Properti lainnya tetap sama */
            --shadow-sm: 0 1px 3px rgba(5, 31, 32, 0.05);
            --shadow-md: 0 4px 10px rgba(5, 31, 32, 0.07);
            --shadow-lg: 0 10px 15px rgba(5, 31, 32, 0.1);
            --border-radius: 12px;
            --transition: all 0.3s ease;
            --sidebar-width: 250px;
            --sidebar-collapsed-width: 64px;
        }


        /* Gaya untuk konten utama */
        .main-content {
            flex: 1;
            padding: 20px;
            transition: var(--transition);
        }

        /* Gaya untuk header */
        .content-header {
            margin-bottom: 30px;
        }

        .header-welcome h2 {
            color: var(--text-primary);
            font-weight: 700;
        }

        .header-welcome p {
            color: var(--text-secondary);
        }

        /* Gaya untuk kartu ringkasan */
        .summary-card-order {
            display: flex;
            align-items: center;
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

        .summary-card-order:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .icon-wrapper-order {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
            color: white;
        }

        .info-wrapper-order p {
            margin-bottom: 5px;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .info-wrapper-order h4 {
            margin-bottom: 0;
            color: var(--text-primary);
            font-weight: 700;
        }

        /* Gaya untuk kartu dashboard */
        .dashboard-card {
            border: none;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-sm);
            background-color: var(--card-bg);
        }

        .card-title-custom {
            color: var(--text-primary);
            font-weight: 600;
        }

        /* Gaya untuk tabel */
        .orders-table-new {
            border-collapse: separate;
            border-spacing: 0;
            width: 100%;
        }

        .orders-table-new thead th {
            background-color: var(--primary-light);
            color: var(--text-primary);
            font-weight: 600;
            border-bottom: 1px solid var(--border-color);
            padding: 12px 15px;
        }

        .orders-table-new tbody tr {
            transition: var(--transition);
        }

        .orders-table-new tbody tr:hover {
            background-color: var(--primary-light);
        }

        .orders-table-new tbody td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        .clickable-row {
            cursor: pointer;
        }

        /* Gaya untuk badge status */
        .status-badge-completed {
            background-color: var(--success);
            color: white;
        }

        .status-badge-pending {
            background-color: var(--warning);
            color: var(--dark);
        }

        .status-badge-canceled {
            background-color: var(--danger);
            color: white;
        }

        .status-badge-delivery {
            background-color: var(--primary);
            color: white;
        }

        /* Gaya untuk tombol */
        .btn-primary {
            background-color: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary);
            border-color: var(--secondary);
        }

        .btn-outline-secondary {
            color: var(--text-secondary);
            border-color: var(--border-color);
        }

        .btn-outline-secondary:hover {
            background-color: var(--primary-light);
            border-color: var(--primary);
            color: var(--primary);
        }

        /* Gaya untuk dot status di dropdown */
        .status-dot {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        /* Gaya untuk footer */
        .footer {
            border-top: 1px solid var(--border-color);
            margin-top: 30px;
        }

        /* Gaya untuk input */
        .form-control, .form-select {
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            color: var(--text-primary);
        }

        .form-control:focus, .form-select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 0.2rem rgba(35, 83, 71, 0.25);
        }

        .input-group-text {
            background-color: var(--primary-light);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        /* Gaya untuk dropdown */
        .dropdown-menu {
            border: none;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-md);
        }

        .dropdown-item {
            color: var(--text-primary);
        }

        .dropdown-item:hover {
            background-color: var(--primary-light);
            color: var(--primary);
        }

        /* Gaya untuk pagination */
        .pagination .page-link {
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
        }

        .pagination .page-item.active .page-link {
            background-color: var(--primary);
            border-color: var(--primary);
        }

        .pagination .page-link:hover {
            background-color: var(--primary-light);
            border-color: var(--primary);
            color: var(--primary);
        }

        /* Gaya untuk tombol aksi */
        .btn-icon {
            background-color: transparent;
            border: none;
            color: var(--text-secondary);
            transition: var(--transition);
        }

        .btn-icon:hover {
            color: var(--primary);
            transform: scale(1.1);
        }

        /* Gaya untuk kartu ringkasan dengan warna yang sesuai */
        .bg-primary-light {
            background-color: var(--primary-light);
        }

        .bg-primary-dark {
            background-color: var(--primary);
        }

        .bg-success-light {
            background-color: rgba(40, 167, 69, 0.2);
        }

        .bg-success-dark {
            background-color: var(--success);
        }

        .bg-warning-light {
            background-color: rgba(255, 193, 7, 0.2);
        }

        .bg-warning-dark {
            background-color: var(--warning);
        }

        .bg-indigo-light {
            background-color: rgba(35, 83, 71, 0.2);
        }

        .bg-indigo-dark {
            background-color: var(--primary);
        }

        .bg-danger-light {
            background-color: rgba(220, 53, 69, 0.2);
        }

        .bg-danger-dark {
            background-color: var(--danger);
        }
    </style>
</head>
<body>
    <div id="preloader"><div class="spinner"></div></div>
    <div id="sidebar-container"></div>
    <div id="overlay"></div>


        <div class="main-content" id="mainContent">
            <header class="content-header">
                <div class="header-welcome">
                    <h2 class="mb-0">Master Orders</h2>
                    <p class="text-muted">
                        Welcome back, Revan! Here's your order list.
                    </p>
                </div>
            </header>

            <section class="order-summary-cards mb-4">
                <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-5 g-4">
                    <div class="col">
                        <div class="summary-card-order bg-primary-light h-100">
                            <div class="icon-wrapper-order bg-primary-dark"><i class="fas fa-box"></i></div>
                            <div class="info-wrapper-order">
                                <p class="text-nowrap">Total Orders</p>
                                <h4 id="total-orders-count">0</h4>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="summary-card-order bg-success-light h-100">
                            <div class="icon-wrapper-order bg-success-dark"><i class="fas fa-check-circle"></i></div>
                            <div class="info-wrapper-order">
                                <p class="text-nowrap">Completed</p>
                                <h4 id="completed-orders-count">0</h4>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="summary-card-order bg-warning-light h-100">
                            <div class="icon-wrapper-order bg-warning-dark"><i class="fas fa-hourglass-half"></i></div>
                            <div class="info-wrapper-order">
                                <p class="text-nowrap">Pending</p>
                                <h4 id="pending-orders-count">0</h4>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="summary-card-order bg-indigo-light h-100">
                            <div class="icon-wrapper-order bg-indigo-dark"><i class="fas fa-truck"></i></div>
                            <div class="info-wrapper-order">
                                <p class="text-nowrap">Delivery</p>
                                <h4 id="delivery-orders-count">0</h4>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="summary-card-order bg-danger-light h-100">
                            <div class="icon-wrapper-order bg-danger-dark"><i class="fas fa-times-circle"></i></div>
                            <div class="info-wrapper-order">
                                <p class="text-nowrap">Canceled</p>
                                <h4 id="canceled-orders-count">0</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="recent-orders-section">
                <div class="card dashboard-card">
                    <div class="card-body">
                        <div class="d-flex flex-wrap justify-content-between align-items-center mb-3 gap-3">
                            <h5 class="card-title-custom mb-0">Recent Orders</h5>
                            <div class="d-flex flex-grow-1 flex-wrap gap-2 justify-content-end">
                                <div class="input-group" style="width: auto; max-width: 300px">
                                    <span class="input-group-text"><i class="fas fa-search"></i></span>
                                    <input type="text" class="form-control" placeholder="Cari ID, Nama, Tanggal..." id="searchInput" />
                                </div>
                                <div class="dropdown" style="width: auto;">
                                    <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="filterDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="fas fa-filter me-1"></i><span id="filter-btn-text">Filter by Status</span>
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="filterDropdown">
                                        <li><a class="dropdown-item" href="#" data-filter-status="all">Semua Pesanan</a></li>
                                        <li><hr class="dropdown-divider" /></li>
                                        <li><a class="dropdown-item d-flex align-items-center" href="#" data-filter-status="Pending"><span class="status-dot bg-warning me-2"></span> Pending</a></li>
                                        <li><a class="dropdown-item d-flex align-items-center" href="#" data-filter-status="Completed"><span class="status-dot bg-success me-2"></span> Completed</a></li>
                                        <li><a class="dropdown-item d-flex align-items-center" href="#" data-filter-status="Canceled"><span class="status-dot bg-danger me-2"></span> Canceled</a></li>
                                        <li><a class="dropdown-item d-flex align-items-center" href="#" data-filter-status="delivery"><span class="status-dot bg-indigo me-2"></span> Delivery</a></li>
                                    </ul>
                                </div>
                                <a href="order_add.html" class="btn btn-primary">
                                    <i class="fas fa-plus me-1"></i> Create Order
                                </a>
                                </div>
                        </div>

                        <div class="table-responsive">
                            <table class="table align-middle orders-table-new">
                                <thead>
                                    <tr>
                                        <th>Order ID</th>
                                        <th>Customer</th>
                                        <th>Date</th>
                                        <th>Total</th>
                                        <th>Status</th>
                                        <th class="text-end">Action</th>
                                    </tr>
                                </thead>
                                <tbody id="ordersTableBody">
                                    </tbody>
                            </table>
                        </div>

                        <div class="d-flex justify-content-between align-items-center mt-3 flex-wrap gap-3">
                            <div class="d-flex align-items-center gap-2">
                                <label for="rows-per-page-select" class="text-muted small">Show:</label>
                                <select class="form-select form-select-sm" id="rows-per-page-select" style="width: auto">
                                    <option value="5">5</option>
                                    <option value="10" selected>10</option>
                                    <option value="20">20</option>
                                    <option value="50">50</option>
                                </select>
                                <span id="pagination-info" class="text-muted small"></span>
                            </div>
                            <nav id="pagination-nav">
                                <div class="btn-toolbar" role="toolbar">
                                    <div class="btn-group me-2" role="group">
                                        <button type="button" class="btn btn-outline-secondary btn-sm" id="prev-page"><i class="fas fa-chevron-left"></i></button>
                                    </div>
                                    <div class="btn-group me-2" role="group" id="pagination-numbers">
                                        </div>
                                    <div class="btn-group" role="group">
                                        <button type="button" class="btn btn-outline-secondary btn-sm" id="next-page"><i class="fas fa-chevron-right"></i></button>
                                    </div>
                                </div>
                            </nav>
                        </div>
                    </div>
                </div>
            </section>

            <footer class="footer mt-auto py-3">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12 text-center text-muted">
                            <script>
                                document.write(new Date().getFullYear());
                            </script>
                             Â© Smart Farm - Design & Develop by Smart Farm.
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="assets/js/admin_script.js"></script>

    <script>
        // ... (Semua kode JavaScript logikamu yang lama tetap di sini, tidak perlu diubah)
        document.addEventListener("DOMContentLoaded", function () {
            setTimeout(function () {
                document.getElementById("preloader").style.display = "none";
            }, 500);

            let ordersData = [
                { id: "#876364", customer: "Revan Putra", date: "07 Sep, 2025", total: "Rp 160.000", status: "Completed" },
                { id: "#876365", customer: "Citra Lestari", date: "07 Sep, 2025", total: "Rp 135.000", status: "Pending" },
                { id: "#876366", customer: "Andi Budi", date: "06 Sep, 2025", total: "Rp 120.000", status: "Canceled" },
                { id: "#876367", customer: "Dewi Lestari", date: "05 Sep, 2025", total: "Rp 90.000", status: "delivery" },
                { id: "#876368", customer: "Siska Amelia", date: "05 Sep, 2025", total: "Rp 25.000", status: "Completed" },
                { id: "#876369", customer: "Arsya Aji", date: "05 Sep, 2025", total: "Rp 35.000", status: "Pending" },
                { id: "#876370", customer: "Dewi Anggraini", date: "04 Sep, 2025", total: "Rp 150.000", status: "Completed" },
                { id: "#876371", customer: "Budi Santoso", date: "03 Sep, 2025", total: "Rp 150.000", status: "delivery" },
                { id: "#876372", customer: "Bagas Perkasa", date: "03 Sep, 2025", total: "Rp 120.000", status: "Canceled" },
                { id: "#876373", customer: "Rina Wijaya", date: "02 Sep, 2025", total: "Rp 150.000", status: "Completed" },
                { id: "#876374", customer: "Fitriani", date: "01 Sep, 2025", total: "Rp 75.000", status: "Pending" },
                { id: "#876375", customer: "Eko Prasetyo", date: "01 Sep, 2025", total: "Rp 180.000", status: "Completed" },
                { id: "#876376", customer: "Nurul Hidayah", date: "31 Aug, 2025", total: "Rp 55.000", status: "delivery" },
                { id: "#876377", customer: "Agus Santoso", date: "31 Aug, 2025", total: "Rp 210.000", status: "Canceled" },
                { id: "#876378", customer: "Sri Wahyuni", date: "30 Aug, 2025", total: "Rp 95.000", status: "Completed" },
                { id: "#876379", customer: "Adi Nugroho", date: "29 Aug, 2025", total: "Rp 115.000", status: "Pending" },
                { id: "#876380", customer: "Indah Permata", date: "29 Aug, 2025", total: "Rp 40.000", status: "delivery" },
                { id: "#876381", customer: "Joko Susilo", date: "28 Aug, 2025", total: "Rp 300.000", status: "Completed" },
                { id: "#876382", customer: "Lina Marlina", date: "27 Aug, 2025", total: "Rp 85.000", status: "Canceled" },
                { id: "#876383", customer: "Yoga Pratama", date: "27 Aug, 2025", total: "Rp 125.000", status: "Pending" },
                { id: "#876384", customer: "Putri Ayu", date: "26 Aug, 2025", total: "Rp 60.000", status: "Completed" },
                { id: "#876385", customer: "Rian Hidayat", date: "25 Aug, 2025", total: "Rp 170.000", status: "delivery" },
                { id: "#876386", customer: "Dian Novita", date: "25 Aug, 2025", total: "Rp 190.000", status: "Completed" },
                { id: "#876387", customer: "Ahmad Fauzi", date: "24 Aug, 2025", total: "Rp 220.000", status: "Pending" },
                { id: "#876388", customer: "Siti Aminah", date: "23 Aug, 2025", total: "Rp 50.000", status: "Canceled" },
                { id: "#876389", customer: "Fajar Nugraha", date: "22 Aug, 2025", total: "Rp 145.000", status: "delivery" },
                { id: "#876390", customer: "Mega Lestari", date: "21 Aug, 2025", total: "Rp 105.000", status: "Completed" },
                { id: "#876391", customer: "Rizki Maulana", date: "20 Aug, 2025", total: "Rp 80.000", status: "Pending" },
                { id: "#876392", customer: "Annisa Fitri", date: "19 Aug, 2025", total: "Rp 250.000", status: "Completed" },
                { id: "#876393", customer: "Hendro Wibowo", date: "18 Aug, 2025", total: "Rp 110.000", status: "delivery" },
            ];

            const tableBody = document.getElementById("ordersTableBody");
            const filterBtnText = document.getElementById("filter-btn-text");
            const searchInput = document.getElementById("searchInput");
            const paginationNumbers = document.getElementById("pagination-numbers");
            const prevPageBtn = document.getElementById("prev-page");
            const nextPageBtn = document.getElementById("next-page");
            const paginationInfo = document.getElementById("pagination-info");
            const rowsPerPageSelect = document.getElementById("rows-per-page-select");

            let currentFilterStatus = "all";
            let currentPage = 1;
            let rowsPerPage = parseInt(rowsPerPageSelect.value, 10);
            let filteredOrders = [];

            const updateSummaryCards = () => {
                document.getElementById("total-orders-count").textContent = ordersData.length;
                document.getElementById("completed-orders-count").textContent = ordersData.filter((o) => o.status === "Completed").length;
                document.getElementById("pending-orders-count").textContent = ordersData.filter((o) => o.status === "Pending").length;
                document.getElementById("canceled-orders-count").textContent = ordersData.filter((o) => o.status === "Canceled").length;
                document.getElementById("delivery-orders-count").textContent = ordersData.filter((o) => o.status === "delivery").length;
            };

            const getStatusBadge = (status) => `<span class="badge rounded-pill status-badge-${status.toLowerCase()}">${status}</span>`;

            const renderTableAndPagination = () => {
                tableBody.innerHTML = "";
                if (filteredOrders.length === 0) {
                    const emptyRow = `<tr><td colspan="6" class="text-center text-muted py-4">List order tidak ditemukan.</td></tr>`;
                    tableBody.innerHTML = emptyRow;
                    paginationInfo.textContent = "Showing 0 to 0 of 0 entries";
                    document.getElementById("pagination-nav").style.display = "none";
                    return;
                }

                const totalPages = Math.ceil(filteredOrders.length / rowsPerPage);
                const start = (currentPage - 1) * rowsPerPage;
                const paginatedData = filteredOrders.slice(start, start + rowsPerPage);

                paginatedData.forEach((order) => {
                    const params = new URLSearchParams({ orderId: order.id, customerName: order.customer, orderDate: order.date, orderTotal: order.total, status: order.status, });
                    const detailLink = `order_detail.html?${params.toString()}`;
                    const updateLink = `confirm_order.html?${params.toString()}`;
                    const updateButton = `<a href="${updateLink}" class="btn btn-icon btn-sm" title="Update Order"><i class="fas fa-check"></i></a>`;
                    const row = `<tr class="clickable-row" data-href="${detailLink}"><td data-label="Order ID" class="fw-bold">${order.id}</td><td data-label="Customer">${order.customer}</td><td data-label="Date">${order.date}</td><td data-label="Total" class="fw-bold">${order.total}</td><td data-label="Status">${getStatusBadge(order.status)}</td><td class="actions-cell text-end"><a href="${detailLink}" class="btn btn-icon btn-sm" title="Lihat Detail"><i class="fas fa-eye"></i></a> ${updateButton} <a href="#" class="btn btn-icon btn-sm delete-btn" data-order-id="${order.id}" data-order-customer="${order.customer}" title="Hapus Pesanan"><i class="fas fa-trash-alt"></i></a></td></tr>`;
                    tableBody.innerHTML += row;
                });

                const end = Math.min(start + rowsPerPage, filteredOrders.length);
                paginationInfo.textContent = `| Showing ${paginatedData.length > 0 ? start + 1 : 0} to ${end} of ${filteredOrders.length} entries`;
                renderPaginationControls(totalPages);
            };

            const renderPaginationControls = (totalPages) => {
                paginationNumbers.innerHTML = "";
                if (totalPages <= 1) {
                    document.getElementById("pagination-nav").style.display = "none";
                    return;
                }
                document.getElementById("pagination-nav").style.display = "flex";
                for (let i = 1; i <= totalPages; i++) {
                    const button = document.createElement("button");
                    button.type = "button";
                    button.className = `btn btn-outline-secondary btn-sm ${i === currentPage ? "active" : ""}`;
                    button.textContent = i;
                    button.dataset.page = i;
                    paginationNumbers.appendChild(button);
                }
                prevPageBtn.disabled = currentPage === 1;
                nextPageBtn.disabled = currentPage === totalPages;
            };

            const applyFiltersAndSearch = () => {
                const searchText = searchInput.value.toLowerCase();
                let dataToProcess = currentFilterStatus === "all" ? ordersData : ordersData.filter((order) => order.status.toLowerCase() === currentFilterStatus.toLowerCase());
                filteredOrders = dataToProcess.filter((order) => order.id.toLowerCase().includes(searchText) || order.customer.toLowerCase().includes(searchText) || order.date.toLowerCase().includes(searchText));
                currentPage = 1;
                renderTableAndPagination();
            };

            const deleteOrder = (orderId) => {
                ordersData = ordersData.filter((order) => order.id !== orderId);
                updateSummaryCards();
                applyFiltersAndSearch();
            };

            const checkUpdatedOrder = () => {
                const updatedOrderId = localStorage.getItem("adminUpdatedOrderId");
                const updatedOrderStatus = localStorage.getItem("adminUpdatedOrderStatus");
                if (updatedOrderId && updatedOrderStatus) {
                    const orderToUpdate = ordersData.find((order) => order.id === updatedOrderId);
                    if (orderToUpdate) {
                        orderToUpdate.status = updatedOrderStatus;
                    }
                    localStorage.removeItem("adminUpdatedOrderId");
                    localStorage.removeItem("adminUpdatedOrderStatus");
                }
            };

            tableBody.addEventListener("click", (event) => {
                const row = event.target.closest("tr.clickable-row");
                const deleteButton = event.target.closest(".delete-btn");

                if (deleteButton) {
                    event.preventDefault();
                    event.stopPropagation();
                    const orderId = deleteButton.dataset.orderId;
                    const customerName = deleteButton.dataset.orderCustomer;
                    Swal.fire({
                        title: "Anda yakin?",
                        html: `Yakin mau hapus pesanan dari <strong>${customerName}</strong> (ID: ${orderId})?`,
                        icon: "warning",
                        showCancelButton: true,
                        confirmButtonColor: "#d33",
                        cancelButtonColor: "#6c757d",
                        confirmButtonText: "Ya, Hapus",
                        cancelButtonText: "Batal",
                    }).then((result) => {
                        if (result.isConfirmed) {
                            deleteOrder(orderId);
                            Swal.fire("Dihapus!", `Pesanan dari ${customerName} berhasil dihapus.`, "success");
                        }
                    });
                } else if (row) {
                    window.location.href = row.dataset.href;
                }
            });

            document.querySelectorAll(".dropdown-item[data-filter-status]").forEach((item) => {
                item.addEventListener("click", (event) => {
                    event.preventDefault();
                    currentFilterStatus = event.currentTarget.getAttribute("data-filter-status");
                    filterBtnText.textContent = event.currentTarget.textContent.trim();
                    applyFiltersAndSearch();
                });
            });

            rowsPerPageSelect.addEventListener("change", (e) => {
                rowsPerPage = parseInt(e.target.value, 10);
                currentPage = 1;
                applyFiltersAndSearch();
            });

            paginationNumbers.addEventListener("click", (e) => {
                if (e.target.tagName === "BUTTON") {
                    currentPage = parseInt(e.target.dataset.page, 10);
                    renderTableAndPagination();
                }
            });

            prevPageBtn.addEventListener("click", () => {
                if (currentPage > 1) {
                    currentPage--;
                    renderTableAndPagination();
                }
            });
            nextPageBtn.addEventListener("click", () => {
                const totalPages = Math.ceil(filteredOrders.length / rowsPerPage);
                if (currentPage < totalPages) {
                    currentPage++;
                    renderTableAndPagination();
                }
            });

            searchInput.addEventListener("input", applyFiltersAndSearch);

            checkUpdatedOrder();
            updateSummaryCards();
            applyFiltersAndSearch();
        });
    </script>
</body>
</html>