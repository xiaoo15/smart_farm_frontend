<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SmartFarm - Tanam, Panen, Nikmati!</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../../assets/css/nav_public.css" />
    <style>
      
    </style>
  </head>
  <body>
    <div id="header-placeholder"></div>

    <main class="main-content-container">
      <div class="container">
        <div class="row mb-4">
          <div class="col-12">
            <div
              id="promoCarousel"
              class="carousel slide"
              data-bs-ride="carousel"
            >
              <div class="carousel-inner rounded-3">
                <div class="carousel-item active">
                  <img
                    src="https://cf.shopee.co.id/file/id-50009109-7a32938a7c29bcb3a055375496f8329b_xxhdpi"
                    class="d-block w-100"
                    alt="Promo"
                  />
                </div>
                <div class="carousel-item">
                  <img
                    src="https://cf.shopee.co.id/file/id-50009109-1a80a2f3f3174128030252b31a382343_xxhdpi"
                    class="d-block w-100"
                    alt="Promo"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
          
        <div class="voucher-section row g-3 mb-4">
          <div class="col-md-6">
            <a href="#" class="voucher-card"
              ><img
                src="https://images.unsplash.com/photo-1464297162577-f5295c892194?q=80&w=1170"
                alt="Voucher"
            /></a>
          </div>
          <div class="col-md-6">
            <a href="#" class="voucher-card"
              ><img
                src="https://media.istockphoto.com/id/1329408006/photo/green-tomatoes-in-greenhouse.webp?s=612x612"
                alt="Voucher"
            /></a>
          </div>
        </div>

        <div class="category-icons-grid bg-white rounded-3 p-3 mb-4">
          <div class="row g-2">
            <script>
              const categories = [
                { icon: "fa-tags", text: "Promo" },
                { icon: "fa-store", text: "Mall" },
                { icon: "fa-bolt", text: "Flash Sale" },
                { icon: "fa-seedling", text: "Bibit" },
                { icon: "fa-carrot", text: "Panen" },
                { icon: "fa-tractor", text: "Alat" },
                { icon: "fa-gift", text: "Gratis Ongkir" },
                { icon: "fa-percent", text: "Diskon" },
                { icon: "fa-boxes-stacked", text: "Paket Hemat" },
                { icon: "fa-ellipsis-h", text: "Lainnya" },
              ];
              categories.forEach((cat) => {
                document.write(
                  `<div class="col-3 col-md-2 col-lg-1 text-center"><a href="#" class="category-icon-item"><div class="icon-wrapper"><i class="fas ${cat.icon}"></i></div><span class="icon-text">${cat.text}</span></a></div>`
                );
              });
            </script>
          </div>
        </div>

        <div class="product-section bg-white rounded-3 p-3">
          <div class="section-header">
            <h4 class="section-title">REKOMENDASI UNTUKMU</h4>
            <a href="#" class="section-see-all"
              >Lihat Semua <i class="fas fa-chevron-right"></i
            ></a>
          </div>
          <div class="row g-3">
            <script>
              for (let i = 1; i <= 12; i++) {
                document.write(`
                  <div class="col-6 col-md-4 col-lg-2">
                    <a href="#" class="product-card-link">
                      <div class="card h-100 product-card">
                        <div class="img-container"><img src="syaa16/images/images (${
                          (i % 4) + 1
                        }).jpeg" class="card-img-top" alt="Produk ${i}"></div>
                        <div class="card-body">
                          <p class="product-title">Nama Produk Keren dan Menarik #${i}</p>
                          <div class="d-flex justify-content-between align-items-center">
                            <p class="product-price mb-0">Rp${(
                              Math.random() * 50000 +
                              5000
                            )
                              .toFixed(0)
                              .replace(
                                /\B(?=(\d{3})+(?!\d))/g,
                                "."
                              )}</p>
                            <p class="product-sold mb-0">${Math.floor(
                              Math.random() * 1000
                            )}+ terjual</p>
                          </div>
                        </div>
                      </div>
                    </a>
                  </div>
                `);
              }
            </script>
          </div>
        </div>
      </div>
    </main>
    <div id="chat-placeholder"></div>
    <script>
      async function loadHeader() {
    try {
      const response = await fetch("../../components/_navbar_public.html");
      if (response.ok) {
        const headerContent = await response.text();
        document.getElementById("header-placeholder").innerHTML = headerContent;
      } else {
        console.error(
          "Gagal memuat _navbar_public.html:",
          response.statusText
        );
      }
    } catch (error) {
      console.error("Error saat memuat file:", error);
    }
  }

  async function loadChatDropdown() {
    try {
      const response = await fetch("./chat.html");
      if (response.ok) {
        const chatContent = await response.text();
        document.getElementById("chat-placeholder").innerHTML = chatContent;

        // PANGGIL SKRIP CHAT DI SINI!
        const chatScript = document.createElement("script");
        chatScript.src = "../../assets/js/chat.js";
        document.body.appendChild(chatScript);

      } else {
        console.error("Gagal memuat chat.html:", response.statusText);
      }
    } catch (error) {
      console.error("Error saat memuat file:", error);
    }
  }
  document.addEventListener("DOMContentLoaded", function () {
    loadHeader();
    loadChatDropdown();
  });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>